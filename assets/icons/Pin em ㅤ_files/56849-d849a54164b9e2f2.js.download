"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["56849"],{95664:function(e,n,t){t.d(n,{$K:function(){return a},dh:function(){return o},ry:function(){return r},xX:function(){return l}});var o=function(e){return/instagram/i.test(e||"")},r=function(e){return o(e)||/facebook/i.test(e||"")||/line/i.test(e||"")||/wechat/i.test(e||"")},i="[Pinterest/Android]",a=function(e){return(e||"").includes("[Pinterest/iOS]")||(e||"").includes(i)},l=function(e){return(e||"").includes(i)}},994507:function(e,n,t){t.d(n,{MK:function(){return o},PW:function(){return d},R8:function(){return s},cH:function(){return u},dm:function(){return b},fE:function(){return _},iK:function(){return m},iN:function(){return l},ne:function(){return c},pn:function(){return f},rE:function(){return r},tf:function(){return p},yd:function(){return a},z5:function(){return i}});var o=0,r="",i="",a="",l=0,u=0,s=0,c=0,d=[],p=[],_=[],m=[],f=[],b=function(){return{count:1,time:0,ts:Date.now()}}},589172:function(e,n,t){t.d(n,{Z:function(){return a}});var o=t(501010);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function a(e){var n,t,a,l,u,s=(a=(t={experimentsClient:(0,o.Z)(),skipActivation:null!=(n=null==e?void 0:e.skipActivation)&&n}).experimentsClient,l=t.skipActivation,(u=(0,a.checkExperiment)("web_masonry_v2",{dangerouslySkipActivation:l})).group?function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach(function(n){var o,i;o=n,i=t[n],(o=function(e){var n=function(e,n){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!=r(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==r(n)?n:n+""}(o))in e?Object.defineProperty(e,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({expName:"web_masonry_v2"},u):{expName:"",anyEnabled:!1,group:""}),c=s.expName,d=s.anyEnabled,p=s.group;return{expName:c,anyEnabled:d,group:p,isMeasureAllEnabled:"enabled_measure_all"===p||"enabled_measure_all_impression_fix"===p,isImpressionFixEnabled:"control_impression_fix"===p||"enabled_impression_fix"===p||"enabled_measure_all_impression_fix"===p}}},79271:function(e,n,t){t.d(n,{Fw:function(){return O},OC:function(){return h},ZP:function(){return E}});var o=t(387784),r=t(230201),i=t(589172),a=t(609252),l=t(774838),u=t(739405),s=t(281213),c=t(2061),d=t(767415),p=t(177433),_=["children"];function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach(function(n){v(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function v(e,n,t){var o;return(o=function(e,n){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!=m(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"),(n="symbol"==m(o)?o:o+"")in e)?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var y=0,h=function(){return y},g=function(){y+=1},S={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},w=function(e){var n=e.events,t=e.startTime,o=e.endTime;return(null==n?void 0:n.filter(function(e){return e>=t&&e<=o}))||[]};function E(e){var n=e.carouselData,t=e.closeupImpressionType,_=e.closeupNavigationType,m=e.componentType,f=e.contextLogData,y=e.clientTrackingParams,h=e.duploShouldTrackPinEvents,E=e.elementType,O=e.impressionAuxFields,P=e.inImpressionExp,I=e.impressionType,C=e.impressionsFramework,L=e.isPaused,T=e.loggingId,x=e.objectIdStr,N=e.slotIndex,U=e.trackCarousel,k=e.viewData,M=e.viewParameter,D=e.viewType,R=e.isPromoted,A=e.storyPinProductEventData,G=(0,r.u)().logContextEvent,F=(0,s.H)().logMrcVideoAdEventOnPlay,j=(0,c.Yg)().logStat,B=C||a.Z,W=(0,o.useRef)(null),H=(0,o.useRef)(function(e){});H.current=function(e){var o,r,i,a,l,u,s,c,d=S[I],p=d.idType,P=b(b((v(C={clientTrackingParams:y,endTime:e.endTime},p,T),v(C,"slotIndex",N),v(C,"time",e.startTime),v(C,"renderDuration",e.endTime-e.startTime),v(C,"type",t),C),O),{},{forcedExit:"removed"===e.forcedExit?0:void 0});if("Pin"===I){g();var C,L,B,W=[],H=e.visibleEvents||new Map,q=e.hiddenEvents||new Map;(O&&O.isPromoted||R)&&[1,50,80,2,102].forEach(function(n){var t=w({events:H.get(n),startTime:e.startTime,endTime:e.endTime}),o=w({events:q.get(n),startTime:e.startTime,endTime:e.endTime});t.forEach(function(e){W.push({type:n,time:e||0,visible:!0})}),o.forEach(function(e){W.push({type:n,time:e||0,visible:!1})})}),P=b(b({},P),{},{pinCellWidth:e.pinCellWidth||0,pinCellHeight:e.pinCellHeight||0,windowWidth:null==(L=window)?void 0:L.innerWidth,windowHeight:null==(B=window)?void 0:B.innerHeight,visibleEvents:W.sort(function(e,n){return e.time-n.time})})}var V={component:m,object_id_str:x,view_type:D,view_data:k||{},view_parameter:M};if(U)n&&U&&G(b(b({event_type:7352,event_data:{pinCarouselSlotImpressions:[b(b({},P),"canonical"===n.type?{carouselDataId:Number(null!=(o=n.carouselId)?o:0),slotIndex:n.index,carouselSlotId:(null==(r=n.carouselSlots)?void 0:r[null!=(i=n.index)?i:0])&&Number(n.carouselSlots[null!=(a=n.index)?a:0].slotId)}:{carouselDataId:Number(null!=(l=n.id)?l:0),carouselSlotId:(null==(u=n.carousel_slots)?void 0:u[null!=(s=n.index)?s:0])&&Number(n.carousel_slots[null!=(c=n.index)?c:0].id),slotIndex:n.index})]}},V),{},{aux_data:b({},f)}));else{var K=b(b({clientTrackingParams:y,event_type:d.eventType},V),{},{element:E,event_data:b(v({},d.impressionType,"Story"===I?P:[P]),A?{storyPinProductEventData:A}:{}),aux_data:b({closeup_navigation_type:_},f)});G(K),F(K)}h&&j("log_pin_impression")};var q=(0,i.Z)({skipActivation:!0}),V=q.expName,K=q.group,Q=(0,u.ZP)(),Z=(0,p.Zv)(),Y=(0,l.B)().isAuthenticated,X=(0,o.useCallback)(function(){var e=!1;try{var n=W.current;if(n instanceof HTMLElement&&(!R||n.getElementsByTagName("img").length>0)){var t=B.start(n);t.onExitViewport(H.current).setDebugId(T||"unknown"),h&&t.onEnterViewport(function(){j("log_pin_impression_track_enter_viewport")}),e=!0,K&&(0,d.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:Q,experimentName:V,group:K,handlerId:Z,isAuthenticated:Y,slotIndex:null!=N?N:"unknown"}})}}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}h&&j("log_pin_impression_track",{didStartTracking:e})},[W.current]);return(0,o.useEffect)(function(){return P&&!B.inExperiment&&B.setExperimentStatus(!0),L||X(),function(){var e=W.current;e instanceof HTMLElement&&(!R||e.getElementsByTagName("img").length>0)&&B.stop(e)}},[L,X]),W}var O=function(e){return(0,e.children)({impressionTrackerRef:E(function(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t={};for(var o in e)if(({}).hasOwnProperty.call(e,o)){if(-1!==n.indexOf(o))continue;t[o]=e[o]}return t}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],-1===n.indexOf(t)&&({}).propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}(e,_))})}},331357:function(e,n,t){t.d(n,{J:function(){return u},U:function(){return g}});var o,r=t(27399),i=t(767415);function a(e,n,t,o,r,i,a){try{var l=e[i](a),u=l.value}catch(e){return void t(e)}l.done?n(u):Promise.resolve(u).then(o,r)}function l(e){return function(){var n=this,t=arguments;return new Promise(function(o,r){var i=e.apply(n,t);function l(e){a(i,o,r,l,u,"next",e)}function u(e){a(i,o,r,l,u,"throw",e)}l(void 0)})}}var u="nic_v4",s="".concat(u,"=1a"),c="".concat(u,"=1b"),d=[s,c],p=["invite_code","invite","board_invite_code","sender"],_=null,m=function(e){return!!p.find(function(n){return e.includes(n)})},f=function(e){var n;return e.pathname.includes("/pin/")&&!m(e.search)&&(n=e.search,!d.find(function(e){return n.includes(e)}))},b=(o=l(regeneratorRuntime.mark(function e(n){var t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.Z.create("InviteSocialTrackingParamNonInviteResource",{user_id:n}).callCreate();case 2:if(!(t=e.sent.resource_response)){e.next=11;break}return o=encodeURIComponent(t.data),(0,i.nP)("".concat(u,".social_tracking_pin_non_invite.encrypted.").concat(o?"true":"false")),e.abrupt("return",o);case 11:return(0,i.nP)("".concat(u,".social_tracking_pin_non_invite.no_resource_response")),e.abrupt("return","");case 13:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),v=function(e,n,t){var o=e.search?"&":"?";return e.pathname+e.search+(o+(t?c:s)+n)},y=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;if(f(e)){var r=t?"mweb":"web";if(!n)return void(0,i.nP)("".concat(r,".").concat(u,".social_tracking_pin_non_invite.insert.no_encrypted_id"));(0,i.nP)("".concat(r,".").concat(u,".social_tracking_pin_non_invite.insert.attempt"));try{var a=v(e,n,t||!1);(0,i.nP)("".concat(r,".").concat(u,".social_tracking_pin_non_invite.insert.success")),o(a)}catch(e){(0,i.nP)("".concat(r,".").concat(u,".social_tracking_pin_non_invite.insert.caught_exception"))}}},h=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;_?y(e,_,t,o):l(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b(n);case 2:_=i=r.sent,y(e,i,t,o);case 5:case"end":return r.stop()}},r)}))()},g=function(e,n,t,o,r){var a,l=t?"mweb":"web";(0,i.nP)("".concat(l,".").concat(u,".social_tracking_pin_non_invite.attempt"));try{!t&&o&&f(e)?((0,i.nP)("".concat(l,".").concat(u,".social_tracking_pin_non_invite.search_string_eligible")),h(e,n,t,r)):(a=e.search,!m(a)&&!a.includes("sender")&&a.includes(u)&&(0,i.nP)("".concat(l,".").concat(u,".social_tracking_pin_non_invite.search_string_land")))}catch(e){(0,i.nP)("".concat(l,".").concat(u,".social_tracking_pin_non_invite.caught_exception"))}}},456871:function(e,n,t){t.d(n,{Z:function(){return d}});var o=t(653551),r=t(331357),i=t(173874),a=t(774838),l=t(843716),u=t(900907),s=t(986523),c=t(767415);function d(){var e,n=(0,a.B)(),t=n.isBot,d=n.isSocialBot,p=n.referrerFromCookie,_=n.referrerFromHeader,m=n.countryFromHostName,f=n.countryFromIp,b=n.regionFromIp,v=n.isAuthenticated,y=(0,o.TH)(),h=(0,s.Z)(),g=new URLSearchParams(y.search),S=!t&&!!g.get("utm_pai"),w=g.get("utm_source"),E=!t&&!d&&(0,i.ey)(y),O=(0,u.Z)({countryFromHostName:m||"",countryFromIp:f||"",regionFromIp:b||"",isAuthenticated:v}),P=_||O&&p||"";e=h||!O?P:(0,l.an)(P);var I=!1,C=!t&&!d&&w&&["email",String(31)].includes(w),L=!t&&!d&&w&&["fb"].includes(w),T="offsite"===w,x=!t&&!d&&!!(e&&(/facebook/.test(e)||/fb/.test(e))),N=!t&&!d&&!!(e&&(/twitter/.test(e)||/tw/.test(e)));E&&(0,c.nP)("unauth.entry_channel.invite_code",{sampleRate:1}),C&&(0,c.nP)("unauth.entry_channel.email_utm_source",{sampleRate:1}),L&&(0,c.nP)("unauth.entry_channel.social_media_utm_source_fb",{sampleRate:1}),T&&(0,c.nP)("unauth.entry_channel.offsite_utm_source",{sampleRate:1}),x&&(0,c.nP)("unauth.entry_channel.social_media_referer_fb",{sampleRate:1}),N&&(0,c.nP)("unauth.entry_channel.social_media_referer_twitter",{sampleRate:1}),I=(0,l.Xn)(e);var U=!t&&I,k=!!g.get(r.J),M=!!g.get("twa_type")||e&&e.startsWith("android-app://com.pinterest.twa"),D=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_admin","utm_id","utm_mail","utm_swu"].some(function(e){return null!==g.get(e)})||!!e||k||M;return{isPaid:S,isInvite:E,utmSource:w,referrer:e,isSocial:E,isDirect:!t&&!S&&!E&&!U&&!D,isSEO:U,isBrowserStorageAllowed:O,isOffsite:T,isBot:t||d}}},843716:function(e,n,t){t.d(n,{Xn:function(){return f},Yf:function(){return g},an:function(){return b}});var o=t(173874),r=t(138482),i=t(575820),a="BING",l="GOOGLE",u="YAHOO",s="YANDEX",c="RAKUTEN",d="NAVER",p="AMP_CACHE",_="DUCKDUCKGO",m=[l,a,u,s,c,d,p,_];function f(e){return m.includes(function(e){var n=(0,i.Qc)(e,!0).hostname;if(n&&e){if(n.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return l;else if(n.includes("bing."))return a;else if(n.includes("yahoo."))return u;else if(n.includes("yandex."))return s;else if(n.includes("rakuten."))return c;else if(n.includes("naver."))return d;else if(n.includes("duckduckgo."))return _;else if(n.includes(".cdn.ampproject.org"))return p}return""}(e))}function b(e){return e||"undefined"!=typeof document&&document.referrer||""}var v=function(e){return"/"!==e[e.length-1]?"".concat(e,"/"):e},y=function(e){var n=v(e),t=(0,o.ll)({url:n});return(0,o.L6)(t)?"PIN":(0,o.am)(t)?"BOARD":(0,r.Z)(t)?"PROFILE":(0,o.bo)(t)?"TODAY":(0,o.z_)(t)?"IDEA":(0,o.R$)(t)?"SHOPPING":"UNKNOWN"},h=function(e){var n=e.selector,t=e.skipExternal,o=Array.from(document.querySelectorAll(n)),r={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},i=new Set;return o.forEach(function(e){var n=e.getAttribute("href");if(!(!n||n.startsWith("#")||t&&n.startsWith("http")&&!n.includes(window.location.hostname))){var o=v(n);if(!i.has(o)){i.add(o);var a=y(o);"PIN"===a?r.pin.push(o):"BOARD"===a?r.board.push(o):"PROFILE"===a?r.user.push(o):"TODAY"===a?r.today.push(o):"IDEA"===a?r.idea.push(o):"SHOPPING"===a&&r.shopping.push(o)}}}),r},g=function(e){var n=e.country,t=e.language,o=e.isBot,r=e.hostname,i=e.pathname;return{domain:r,country:n,language:t,currentUrl:i,pageType:y(i),referrer:document.referrer,isBot:o,links:h({selector:"a[href]",skipExternal:!0})}}},184285:function(e,n,t){t.d(n,{HZ:function(){return v},ZP:function(){return x},e_:function(){return L},pT:function(){return w}});var o=t(387784),r=t(581722),i=t(15881),a=t(95664),l=t(79271),u=t(456871),s=t(774838),c=t(418282),d=t(270922),p=t(739405),_=t(658375),m=t(767415),f=Date.now(),b=function(){return(0,r.v9)(function(e){var n,t;return null!=(n=null==(t=e.upsell)?void 0:t.mWebSignupModal.modal.isShown)&&n})},v=function(){return(0,r.v9)(function(e){var n;return null==(n=e.upsell)?void 0:n.modal})},y=function(){return(0,l.OC)()},h=function(){return Date.now()-f},g=function(){return(0,r.v9)(function(e){var n,t;return null!=(n=null==(t=e.upsell)?void 0:t.mWebSignupModal.isUnauthSharingModalsShown)&&n})},S=function(){return(0,r.v9)(function(e){var n;return!!(null!=(n=e.upsell)&&n.mWebSignupModal.modalHasShown)})},w=function(){return(0,r.v9)(function(e){var n;return null==(n=e.upsell)?void 0:n.mWebSignupModal})},E=function(){var e=(0,s.B)(),n=(0,u.Z)(),t=(0,p.ZP)();return(0,o.useMemo)(function(){return(0,d.T9)(e,n,t)},[e,n,t])},O=Object.freeze(["CO","ID"]),P=function(e){return O.includes(e)},I=function(e){if(!(0,a.dh)(e))return!1;var n=(0,c.Nl)();return n.getItem(i.QV)||((0,m.nP)("mobile_signup_modal.rules.suppress_for_instagram_in_app_browser"),n.setItem(i.QV,"1")),!0},C=function(e){var n=e.isUnauthSharingModalsShown,t=e.modalHasShown,o=e.sessionContext;if(!o)return!1;var r=o.country,i=o.userAgent;return n||t&&P(r)||(0,_.P)()||I(i)},L=function(e){var n=e.isModalShown,t=e.isUnauthSharingModalsShown,o=e.modalHasShown,r=e.country,i=e.userAgent;return!n&&!(t||o&&P(r)||(0,_.P)()||I(i))},T=function(){var e=b(),n=g(),t=S(),r=E();return(0,o.useCallback)(function(){return!e&&!C({isUnauthSharingModalsShown:n,modalHasShown:t,sessionContext:r})},[e,n,t,r])};function x(){return{isModalShown:b(),modal:(0,r.v9)(function(e){var n;return null==(n=e.upsell)?void 0:n.mWebSignupModal.modal}),upsellEligibleNavigationCount:(0,r.v9)(function(e){var n;return null==(n=e.upsell)?void 0:n.mWebSignupModal.upsellEligibleNavigationCount}),isUnauthSharingModalsShown:g(),modalHasShown:S(),sessionContext:E(),isUpsellEnabledGlobally:T(),getPinImpressionCount:y,getSessionDuration:h}}},432414:function(e,n,t){t.d(n,{ZW:function(){return g},Gk:function(){return h},YM:function(){return S}});var o=t(173874),r=t(138482),i=t(730056);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l="dweb_eoq_q3_standard",u="dweb_eoq_q3_advanced",s="mweb_eoq_q3_standard",c="mweb_eoq_q3_advanced",d=[{bundleId:"dweb_eoq_q3_standard",experimentKey:l,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:u,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{modal:{displayProps:{signupFlow:{type:"login"}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:s,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:c,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}}];function p(e,n){var t,o=d.filter(function(t){if(!t.active||!t.overrides[e])return!1;switch(t.experimentKey){case l:return n("dweb_eoq_q3_standard").anyEnabled;case u:return n("dweb_eoq_q3_advanced").anyEnabled;case s:return n("mweb_eoq_q3_standard").anyEnabled;case c:return n("mweb_eoq_q3_advanced").anyEnabled;default:return!1}});return null==(t=o[o.length-1])?void 0:t.overrides[e]}var _=function(e){var n,t,o,r,l,u;return{id:e.id,evaluate:(t=(n={ruleId:e.id,baseEvaluateFunction:e.evaluate}).ruleId,o=n.baseEvaluateFunction,function(e){var n,r,a=e.checkExperiment,l=e.session,u=a&&(null==(n=p(t,a))?void 0:n.evaluateContextOverride)||{},s=u[null!=(r=null==l?void 0:l.channel)?r:"default"]||u.default||{};return o((0,i.Z)(e,s))}),getNextState:(l=(r={ruleId:e.id,baseNextStateFunction:e.getNextState}).ruleId,u=r.baseNextStateFunction,function(e){var n,t=e.action,o=u({action:t,state:e.state,decision:e.decision});if(!("payload"in t&&"object"===a(t.payload)&&null!==t.payload&&"checkExperiment"in t.payload))return o;var r=(null==(n=p(l,t.payload.checkExperiment))?void 0:n.stateOverride)||{};return 0===Object.keys(r).length?o:(0,i.Z)(o,r)})}},m=t(671220);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach(function(n){var o,r;o=n,r=t[n],(o=function(e){var n=function(e,n){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!=f(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==f(n)?n:n+""}(o))in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var y=function(e){if(!e)return!1;var n=e("mweb_feature_upsell_copy_visual_combination_v2");if("enabled_copy_2"===n.group)return!0;if("control"===n.group)return!1;var t=e("mweb_feature_upsell_copy_visual_combination_v1");return["enabled_copy_1","enabled_copy_2","enabled_tone_filter_1","enabled_tone_filter_2","enabled_visual_search_1","enabled_visual_search_2","enabled_create_board_1","enabled_create_board_2"].some(function(e){return t.group===e})},h={shouldShowCloseupNavigationalModal:_({id:"closeup_navigational_modal_trigger",evaluate:function(e){var n=e.pinViewCount,t=e.navigationalPagesUpsellSeen,o=e.checkExperiment;return(null==o||!o("pc_no_navigational_upsell").anyEnabled)&&(null!=n?n:0)>=4&&!t},getNextState:function(e){return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}}),shouldShowSaveModal:_({id:"save_modal_trigger",evaluate:function(){return!0},getNextState:function(e){var n=e.action,t=e.state;return v(v({},t),{},{pinSaveCount:t.pinSaveCount+1,pinId:n.payload.pinId,attributionLabel:n.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:n.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:n.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp"}}})}}),shouldShowNavigationalModal:_({id:"desktop_navigational_modal_trigger",evaluate:function(e){var n=e.uniqueNavigationalPagesSeen,t=e.navigationalPagesUpsellSeen,o=e.navigationalPagesViewThresholdDesktop,r=e.checkExperiment;return(null==r||!r("pc_no_navigational_upsell").anyEnabled)&&(void 0===n?[]:n).length>=(null!=o?o:4)&&!t},getNextState:function(e){var n=e.state,t=e.action;return v(v({},n),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_".concat(t.payload.containerPage),container:t.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}}),shouldShowSignupModalOnCloseUpClick:_({id:"closeup_modal_trigger",evaluate:function(e){var n=e.modal,t=e.clickCloseUp;return!(null!=n&&n.isShown)&&!t},getNextState:function(e){return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickCloseUp:!0})}}),shouldShowSignupModalOnClickContextMenuSaveButton:_({id:"context_menu_save_button_trigger",evaluate:function(e){var n=e.modal,t=e.clickContextMenuSaveButton;return!(null!=n&&n.isShown)&&!t},getNextState:function(e){var n,t,o=e.action,r=e.state;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(o.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:"click_context_menu_".concat(o.payload.attributionLabelSource,"_save_button"),container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===o.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:"click_context_menu_".concat(o.payload.attributionLabelSource,"_save_button"),container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:o.payload.pinId},v(v({},r),{},{modal:{isShown:!0,displayProps:t},clickContextMenuSaveButton:!0,pinId:null!=(n=o.payload.pinId)?n:"",attributionLabel:o.payload.attributionLabelSource})}}),shouldShowSignupModalOnClickCloseupSaveButton:_({id:"closeup_save_button_trigger",evaluate:function(e){var n=e.modal,t=e.clickCloseUpContextMenuSaveButton;return!(null!=n&&n.isShown)&&!t},getNextState:function(e){var n,t,o=e.action,r=e.state;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(o.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:"click_context_menu_".concat(o.payload.attributionLabelSource,"_save_button"),container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===o.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:"click_context_menu_".concat(o.payload.attributionLabelSource,"_save_button"),container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:o.payload.pinId},v(v({},r),{},{modal:{isShown:!0,displayProps:t},clickCloseUpContextMenuSaveButton:!0,pinId:null!=(n=o.payload.pinId)?n:"",attributionLabel:o.payload.attributionLabelSource})}}),shouldShowSignupModalOnContextMenuDownloadClick:_({id:"desktop_context_menu_download_button_trigger",evaluate:function(e){var n=e.limitReached,t=e.inImmediateUpsellGroup,o=e.modal;return!!((n||t)&&!(null!=o&&o.isShown))},getNextState:function(e){var n,t,o=e.action,r=e.state;return t=o.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:"click_".concat(o.payload.attributionLabelSource,"_download_button"),container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell"}:{signupFlow:{type:"signup"},attributionLabel:"click_".concat(o.payload.attributionLabelSource,"_download_button"),container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:o.payload.pinId},v(v({},r),{},{modal:{isShown:!0,displayProps:t},clickContextMenuDownloadButton:!0,pinId:null!=(n=o.payload.pinId)?n:"",attributionLabel:o.payload.attributionLabelSource})}}),shouldShowSignupModalOnCloseupDownloadClick:_({id:"closeup_download_button_trigger",evaluate:function(e){var n=e.limitReached,t=e.modal;return!!(n&&!(null!=t&&t.isShown))},getNextState:function(e){var n,t=e.action;return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_context_menu_".concat(t.payload.attributionLabelSource,"_download_button"),container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:t.payload.pinId}},clickCloseUpContextMenuDownloadButton:!0,pinId:null!=(n=t.payload.pinId)?n:"",attributionLabel:t.payload.attributionLabelSource})}}),shouldShowSignupModalOnFollowButtonClick:_({id:"follow_button_trigger",evaluate:function(e){var n=e.modal,t=e.clickFollowButton;return!(null!=n&&n.isShown)&&!t},getNextState:function(e){var n=e.action;return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:n.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:n.payload.isContextualFollowEnabled?"follow":"",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:n.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}}),shouldShowSignupModalOnFollowingButtonClick:_({id:"following_button_trigger",evaluate:function(e){var n=e.modal,t=e.clickFollowingButton;return!(null!=n&&n.isShown)&&!t},getNextState:function(e){return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}}),shouldShowSignupModalOnFollowersButtonClick:_({id:"followers_button_trigger",evaluate:function(e){var n=e.modal,t=e.clickFollowersButton;return!(null!=n&&n.isShown)&&!t},getNextState:function(e){return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}}),shouldShowLoginModalOnCommentComposerClick:_({id:"comment_composer_trigger",evaluate:function(e){var n=e.modal,t=e.clickCommentComposerUpsell;return!(null!=n&&n.isShown)&&!t},getNextState:function(e){return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}}),shouldShowLoginModalOnRelatedPinOpenLinkClick:_({id:"related_pin_open_link_trigger",evaluate:function(e){var n=e.modal,t=e.clickRelatedPinOpenLinkUpsell;return!(null!=n&&n.isShown)&&!t},getNextState:function(e){return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}}),shouldShowLoginModalOnPinLinkClick:_({id:"pin_link_trigger",evaluate:function(e){var n=e.modal,t=e.pinLinkClickCount,o=void 0===t?0:t;return!(null!=n&&n.isShown)&&(2===o||o%5==0)},getNextState:function(e){var n=e.action;return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:n.payload.count})}}),shouldShowSocialPinLandingModal:_({id:"social_pin_landing_modal_trigger",evaluate:function(e){var n=e.inviter,t=e.socialPinLandingModalShown,o=e.checkExperiment;return!!n&&!t&&!!(null!=o&&o("ce_dweb_unauth_splp_blocking").anyEnabled||null!=o&&o("ce_dweb_unauth_splp_blocking_12s").anyEnabled)},getNextState:function(e){var n=e.action;return v(v({},e.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:n.type===m.Fy?"delay_".concat(n.payload.containerPage):"scroll_".concat(n.payload.containerPage),container:n.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})}}),shouldShowScrollingBox:{id:"desktop_scrolling_box_trigger",evaluate:function(e){var n=e.checkExperiment;return!(null==n?void 0:n("pc_no_navigational_upsell").anyEnabled)},getNextState:function(e){return e.state}}},g={shouldShowSaveEducationPopover:_({id:"mobile_save_education_popover_trigger",evaluate:function(e){var n=e.saveEducationPopoverEverShown,t=e.checkExperiment;if(n)return!1;var o=((null==t?void 0:t("ce_mweb_unauth_social_feature_education"))||{}).group;return!!(null==o?void 0:o.startsWith("enabled_group_board"))},getNextState:function(e){return v(v({},e.state),{},{showSaveEducationPopover:!0,saveEducationPopoverEverShown:!0})}}),shouldShowReplyToSenderSheet:_({id:"mobile_reply_to_sender_sheet_trigger",evaluate:function(e){var n=e.replyToSenderSheetEverShown,t=e.checkExperiment;if(n)return!1;var o=((null==t?void 0:t("ce_mweb_unauth_social_feature_education"))||{}).group;return!!(null==o?void 0:o.startsWith("enabled_reply_to_sender"))},getNextState:function(e){return v(v({},e.state),{},{showReplyToSenderSheet:!0,replyToSenderSheetEverShown:!0})}}),shouldAllowUnauthSave:_({id:"mobile_unauth_save_quota_check",evaluate:function(e){var n=e.isPPMAndroidUnauthExperience,t=e.isFromUnauthContextMenu,o=e.currentUnauthSaves,r=e.mobileUnauthSaveThreshold;return!t&&!n&&(void 0===o?0:o)<(null!=r?r:2)},getNextState:function(e){var n,t=e.action,o=e.state;return v(v({},o),{},{mWebSignupModal:v(v({},o.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(n=o.mWebSignupModal.timesShownForSessionCount)?n:0)+1,scrollControllerHasDisplayed:o.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:t.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===t.payload.headingType?"click_save_button_with_max_unauth_saves":t.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:t.payload.pinId}})})}}),shouldShowMainPinImageNavigationalModal:_({id:"mobile_main_pin_image_modal",evaluate:function(e){var n=e.checkExperiment,t=e.isUpsellEnabledGlobally,o=e.isModalCurrentlyShown,r=e.learningUpsellScenario,i=e.forceShowModal,a=r&&t&&!o&&((null==n?void 0:n("mweb_unauth_main_learning_pin_full_page").anyEnabled)||(null==n?void 0:n("mweb_q2_mau_push_pc_advanced").anyEnabled)||(null==n?void 0:n("mweb_q2_mau_push_pc_advanced_row").anyEnabled)||(null==n?void 0:n("mweb_q2_mau_push_pc_emergency").anyEnabled)||(null==n?void 0:n("mweb_q2_mau_push_pc_emergency_row").anyEnabled)||(null==n?void 0:n("mweb_q2_mau_push_pc_eu_safe").anyEnabled));return r&&(i||!!a)},getNextState:function(e){var n,t,o=e.action,r=e.state;return v(v({},r),{},{mWebSignupModal:v(v({},r.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(n=null==(t=r.mWebSignupModal)?void 0:t.timesShownForSessionCount)?n:0)+1,scrollControllerHasDisplayed:r.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:o.payload.pinId}})})}}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:function(e){return e.state},evaluate:function(e){var n=e.learningUpsellScenario,t=e.hasConversionUpsell,o=e.isLearningAppUpsellShown;return t||!n?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:o,newState:!o}}},shouldShowNavigationUpsell:_({id:"mobile_navigation_upsell",evaluate:function(e){var n=e.isUpsellEnabledGlobally,t=e.isModalCurrentlyShown,o=e.newLocation,r=e.isNavigationFromSwipe,i=e.currentNavigationCount,a=e.hasSeenModal,l=e.pageThreshold,u=e.isWashDismissible,s=e.canShowSignupModalOnRouteChange,c=e.navigationalPagesViewThresholdMobile,d=e.checkExperiment;if(null==d?void 0:d("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};var p=c||l||4;if(t)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!(n&&!r)||!(o&&(null==s?void 0:s(o))))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(!((null!=i?i:0)>=p)||a)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};var _=y(d);return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:"navigation_".concat(p,"_").concat(i),allowCloseOnOutsideClick:u,headingType:_?"mweb_feature_upsell_copy_visual_combination_v1":"none"}},getNextState:function(e){var n,t,o,r=e.state,i=e.decision;return v(v({},r),{},{mWebSignupModal:v(v({},r.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(n=r.mWebSignupModal.timesShownForSessionCount)?n:0)+1,scrollControllerHasDisplayed:r.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:null!=(t=null==i?void 0:i.headingType)?t:"none",trigger:{attributionLabel:null!=(o=null==i?void 0:i.attributionLabel)?o:"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!(null!=i&&i.allowCloseOnOutsideClick)},pinId:null}})})}}),shouldShowOnLandUpsell:_({id:"mobile_on_land_upsell",evaluate:function(e){var n,t=e.checkExperiment,i=e.isUpsellEnabledGlobally,a=e.hasSeenNavUpsell,l=e.location,u=e.userAgent,s=e.showUnauthMwebSocialDefaultModalUpsell,c=e.isSocialInAppBrowser,d=e.shouldTriggerOnLand;if((null==t?void 0:t("pc_no_navigational_upsell").anyEnabled)||!i||a||!(l&&((0,o.L6)(l)||(0,o.am)(l)||(0,r.Z)(l)||(0,o.En)(l)||(0,o.ey)(l))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};var p=!((null==c?void 0:c(u))&&(null==t?void 0:t("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled))&&s;if(!s&&!(void 0!==d&&d))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};var _=!p&&y(t);if("social"==(n=p?"social":_?"mweb_feature_upsell_copy_visual_combination_v1":"none")&&t){var m=t("ce_mweb_visual_plp_upsell");if(m.anyEnabled)switch(m.group){case"enabled_1":n="social_visual_1";break;case"enabled_2":n="social_visual_2";break;case"enabled_3":n="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:p,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:l,oldLocation:l},headingType:n}}},getNextState:function(e){var n,t,o=e.state,r=e.decision.modalConfig;return v(v({},o),{},{mWebSignupModal:v(v({},o.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(n=o.mWebSignupModal.timesShownForSessionCount)?n:0)+1,scrollControllerHasDisplayed:o.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:null==r?void 0:r.headingType,trigger:{attributionLabel:null!=(t=null==r?void 0:r.attributionLabel)?t:"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}})})}}),shouldShowSignupModalOnContextMenuDownloadClick:_({id:"mobile_context_menu_download_button_trigger",evaluate:function(e){var n=e.limitReached,t=e.inImmediateUpsellGroup,o=e.modal;return(n||t)&&!(null!=o&&o.isShown)},getNextState:function(e){var n,t=e.action,o=e.state,r=t.payload,i=r.inMwebDownloadCTAExp,a=r.showDownloadCloseupIcon,l=r.attributionLabelSource,u="none";u=i||a?"download_limit_reached":"none";var s={trigger:{attributionLabel:"click_".concat(l,"_download_button"),reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:u};return v(v({},o),{},{mWebSignupModal:v(v({},o.mWebSignupModal),{},{modal:{isShown:!0,displayProps:s,pinId:null!=(n=t.payload.pinId)?n:""}})})}}),shouldShowSignupModalOnFollowButtonClickMobile:_({id:"follow_button_trigger_mobile",evaluate:function(e){var n=e.mWebSignupModal;return!(null!=n&&n.modal.isShown)},getNextState:function(e){var n,t=e.action,o=e.state;return v(v({},o),{},{mWebSignupModal:v(v({},o.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(n=o.mWebSignupModal.timesShownForSessionCount)?n:0)+1,scrollControllerHasDisplayed:o.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:t.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:t.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}})})}}),shouldShowFloatingBanner:{id:"mobile_floating_banner_trigger",evaluate:function(e){var n=e.checkExperiment;return!(null==n?void 0:n("pc_no_navigational_upsell").anyEnabled)},getNextState:function(e){return e.state}}},S={desktop:h,mobile:g}},671220:function(e,n,t){t.d(n,{dn:function(){return G},UA:function(){return Q},ub:function(){return ei},Ik:function(){return N},mV:function(){return A},OU:function(){return m},Gh:function(){return y},LL:function(){return ev},Li:function(){return es},jB:function(){return en},G5:function(){return em},CC:function(){return eV},F8:function(){return eE},Ue:function(){return V},t:function(){return eZ},h4:function(){return q},g_:function(){return Y},BF:function(){return ec},rA:function(){return U},aj:function(){return eF},qD:function(){return ex},IS:function(){return eB},it:function(){return D},Yr:function(){return W},Vi:function(){return B},by:function(){return g},wK:function(){return J},i8:function(){return E},K7:function(){return v},GY:function(){return eI},vY:function(){return eu},HK:function(){return w},yC:function(){return eA},f$:function(){return $},qs:function(){return X},Fy:function(){return j},QG:function(){return O},CH:function(){return eG},WE:function(){return eS},qT:function(){return S},Dk:function(){return el},Bh:function(){return Z},qq:function(){return eH},Nx:function(){return I},$S:function(){return C},Lu:function(){return et},k7:function(){return eN},Qm:function(){return eR},Pp:function(){return T},Sy:function(){return er},b9:function(){return ef},z1:function(){return eo},$y:function(){return _},tP:function(){return P},Zr:function(){return M},sg:function(){return ee},QC:function(){return eT},Hm:function(){return eb},FV:function(){return eh},o9:function(){return ek},MZ:function(){return eK},V9:function(){return K},AS:function(){return b},kd:function(){return k},pp:function(){return f},QA:function(){return e_},tW:function(){return ew},v2:function(){return eO},Jw:function(){return eq},w$:function(){return ea},Pu:function(){return ej},gU:function(){return eY},cD:function(){return ey},P9:function(){return L},YT:function(){return eW},pZ:function(){return eM},dL:function(){return ep},XE:function(){return eL},Ff:function(){return eU},tA:function(){return H},TQ:function(){return z},gH:function(){return R},aJ:function(){return F},C5:function(){return ed},Dw:function(){return eQ},Aw:function(){return eD},xY:function(){return eg},Bi:function(){return x},ap:function(){return eP},ht:function(){return eC},mX:function(){return h}});var o=t(95664),r=t(865043),i=t(184285),a=t(432414),l=function(e){var n,t,o=e.modal,r=e.mWebSignupModal,i=e.appUpsells;return!!(o.isShown||r.modal.isShown||(null==(n=i.learningUpsell)?void 0:n.isShown)||(null==(t=i.iabAppUpsell)?void 0:t.isShown))},u=t(932921),s=t(767415);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach(function(n){var o,r;o=n,r=t[n],(o=function(e){var n=function(e,n){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!=c(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==c(n)?n:n+""}(o))in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var _="PROCESS_MOBILE_NAVIGATION_CHANGE",m="SET_UPSELL_REASON",f="UPS_EVENT_PIN_VIEW",b="UPS_EVENT_PIN_SAVE",v="UPS_EVENT_DESKTOP_MODAL_SHOW",y="UPS_EVENT_DESKTOP_MODAL_DISMISSED",h="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",g="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",S="TRIGGER_SCROLL_DOWN_UPSELL",w="CLEAR_SCROLL_DOWN_UPSELL",E="TRIGGER_SAVE_EDUCATION_POPOVER",O="CLEAR_SAVE_EDUCATION_POPOVER",P="TRIGGER_REPLY_TO_SENDER_SHEET",I="CLEAR_REPLY_TO_SENDER_SHEET",C="CLICK_CLOSEUP_UPSELL",L="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",T="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",x="CLICK_FOLLOW_BUTTON_UPSELL",N="CLICK_FOLLOWING_BUTTON_UPSELL",U="CLICK_FOLLOWERS_BUTTON_UPSELL",k="CLICK_COMMENT_COMPOSER_UPSELL",M="CLICK_PIN_LINK_UPSELL",D="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",R="RECORD_NAVIGATIONAL_PAGE",A="SET_INITIAL_SESSION_CONTEXT",G="RESET_UPSELL_TRIGGER_STATE",F="RECORD_SOCIAL_PIN_LANDING_PAGE",j="TRIGGER_SOCIAL_DELAY_MODAL",B="TRIGGER_SOCIAL_SCROLL_MODAL",W="SHOW_MOBILE_SIGNUP_MODAL",H="DISMISS_MOBILE_SIGNUP_MODAL",q="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",V="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",K="HIDE_UNAUTH_SHARING_MODALS",Q="SHOW_UNAUTH_SHARING_MODALS",Z="RESTORE_FROM_LOCAL_STORAGE",Y="MAIN_PIN_IMAGE_CLICK_MOBILE",X="ON_LAND_UPSELL_MOBILE",$="SET_LEARNING_UPSELL_VISIBILITY",J="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",z="DISMISS_MOBILE_FLOATING_UPSELL",ee="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",en="INCREMENT_PIN_SAVE_COUNT",et="DECREMENT_PIN_SAVE_COUNT",eo="INCREMENT_UNAUTH_CLICKTHROUGH_COUNT",er="SET_UNAUTH_DOWNLOAD_COUNT",ei="UPS_EVENT_PIN_SAVE_MOBILE",ea="SET_REFERRED_APP_UPSELL_STATE",el=function(e){return{type:Z,payload:{upsellEligibleNavigationCount:e}}},eu=function(e){return{type:m,payload:{upsellReason:e}}},es=function(e,n,t){return{type:f,payload:{pinId:e,seoUrl:n,checkExperiment:t}}},ec=function(e,n){return{type:b,payload:{pinId:e,attributionLabel:n}}},ed=function(){return{type:y}},ep=function(e){return{type:v,payload:{displayProps:e}}},e_=function(){return{type:C}},em=function(e,n,t){return{type:L,payload:{pinId:e,attributionLabelSource:n,signupToLoginExpGroup:t}}},ef=function(e,n){return{type:x,payload:{isIdeaPin:e,isContextualFollowEnabled:n}}},eb=function(e,n,t,o){return{type:h,payload:{pinId:e,attributionLabelSource:n,signupToLoginExpGroup:t,checkExperiment:o}}},ev=function(e){var n=e.pinId,t=e.attributionLabelSource,o=e.downloadAllowedCallback;return function(e){var i=e.checkExperiment;return e.sessionContext,function(e,a){var s=a(),c=(0,u.H)(i,{reduxUnauthDownloadCount:s.upsell.unauthDownloadCount,dispatch:e}),d=c.limitReached,p=c.oldCount,_=c.newCount;(0,r.My)("dweb.unauth.context_menu.download_image",{attributionLabelSource:t,limitReached:d,oldCount:p,newCount:_}),e({type:g,payload:{pinId:n,attributionLabelSource:t,limitReached:d,checkExperiment:i}}),l(a().upsell)||o()}}},ey=function(e){var n=e.pinId,t=e.attributionLabelSource,o=e.inImmediateUpsellGroup,i=e.inDwebSwapDownloadUpsellExp,a=e.downloadAllowedCallback,s=e.showDownloadIconForRelatedPins,c=e.inDwebDownloadCTAExp;return function(e){var d=e.checkExperiment;return e.sessionContext,function(e,p){var _=p(),m=(0,u.H)(d,{reduxUnauthDownloadCount:_.upsell.unauthDownloadCount,dispatch:e}),f=m.limitReached,b=m.oldCount,v=m.newCount;s?(0,r.My)("dweb.unauth.action_bar.download_image",{attributionLabelSource:t,limitReached:f,oldCount:b,newCount:v}):c?(0,r.My)("dweb.unauth.download_cta.download_image",{attributionLabelSource:t}):i?(0,r.My)("dweb.unauth.swap_download_upsell.download_image",{attributionLabelSource:t}):(0,r.My)("dweb.unauth.context_menu.download_image",{attributionLabelSource:t,limitReached:f,oldCount:b,newCount:v}),e({type:T,payload:{pinId:n,attributionLabelSource:t,limitReached:f,inImmediateUpsellGroup:o,inDwebSwapDownloadUpsellExp:i,checkExperiment:d}}),l(p().upsell)||a()}}},eh=function(){return{type:N}},eg=function(){return{type:U}},eS=function(){return{type:k}},ew=function(e){return{type:M,payload:{count:e}}},eE=function(){return{type:D}},eO=function(e,n){return function(t){var o=t.checkExperiment,r=t.sessionContext;return function(t){t({type:R,payload:{pageUniqueKey:e,containerPage:n,checkExperiment:o,sessionContext:r}})}}},eP=function(e){return{type:A,payload:{sessionContext:e}}},eI=function(e,n){return{type:F,payload:{inviter:e,containerPage:n}}},eC=function(e){return function(n){var t=n.checkExperiment;return function(n){n({type:j,payload:{containerPage:e,checkExperiment:t}})}}},eL=function(e){return function(n){var t=n.checkExperiment;return function(n){n({type:B,payload:{containerPage:e,checkExperiment:t}})}}},eT=function(){return{type:O}},ex=function(){return function(e){var n=e.checkExperiment;return e.sessionContext,function(e){var t=((null==n?void 0:n("ce_mweb_unauth_social_feature_education"))||{}).group;null!=t&&t.startsWith("enabled_group_board")?e(function(e){e({type:E,payload:{checkExperiment:n}})}):null!=t&&t.startsWith("enabled_reply_to_sender")&&e(function(e){e({type:P,payload:{checkExperiment:n}})})}}},eN=function(){return{type:I}},eU=function(e){return{type:W,payload:e}},ek=function(){return{type:H}},eM=function(e){return{type:q,payload:{topInterest:e}}},eD=function(){return{type:V}},eR=function(){return{type:K}},eA=function(){return{type:Q}},eG=function(e){return function(n){var t=n.checkExperiment,o=n.sessionContext;return function(n,i){n({type:_,payload:p(p({},e),{},{checkExperiment:t,sessionContext:o})}),l(i().upsell)||(0,r.My)("mweb.nav.upsell.show.".concat(e.currentNavigationCount))}}},eF=function(e){return function(n){var t=n.checkExperiment,l=n.sessionContext;return function(n,u){var c,d,p,_=u().upsell,m=l.country,f=l.userAgent,b=null==(p=a.YM.mobile.shouldShowOnLandUpsell)?void 0:p.evaluate({checkExperiment:t,isUpsellEnabledGlobally:(0,i.e_)({isModalShown:null!=(c=_.mWebSignupModal.modal.isShown)&&c,isUnauthSharingModalsShown:null!=(d=_.mWebSignupModal.isUnauthSharingModalsShown)&&d,modalHasShown:!!_.mWebSignupModal.modalHasShown,country:m,userAgent:f}),hasSeenNavUpsell:_.mWebSignupModal.modalHasShown,location:e.location,isPaid:e.isPaid,isSocial:e.isSocial,isDirect:e.isDirect,isSEO:e.isSEO,userAgent:f,showUnauthMwebSocialDefaultModalUpsell:e.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:o.ry,session:l});b.shouldShowModal&&b.modalConfig&&((0,r.My)("mweb.nav.upsell.show.0"),b.showUnauthMwebSocialUpsell&&(0,s.nP)("unauth.mweb.social.pin.upsell",{sampleRate:1}),n({type:X,payload:{decision:b,checkExperiment:t}}))}}},ej=function(e){return function(n){var t=n.checkExperiment,o=n.sessionContext;return function(n,i){var l,u,s,c=!!(null!=(l=i().upsell.appUpsells.learningUpsell)&&l.isShown),d=null==(u=a.YM.mobile.shouldShowMainPinImageNavigationalModal)?void 0:u.evaluate({checkExperiment:t,session:o,isUpsellEnabledGlobally:e.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:e.upsellContext.isModalShown,learningUpsellScenario:e.learningUpsellScenario}),p=null==(s=a.YM.mobile.shouldShowMainPinImageAppUpsell)?void 0:s.evaluate({learningUpsellScenario:e.learningUpsellScenario,hasConversionUpsell:!!d,isLearningAppUpsellShown:c});d?(0,r.My)("mweb.nav.upsell.show.main_pin_image_click"):p.shouldToggleAppUpsell?p.currentlyShowing?e.trackInteraction({action:"dismiss",item:"learning-upsell"}):e.trackInteraction({action:"click",item:"learning-upsell"}):e.onImageClick(),n({type:Y,payload:{conversionDecision:d,appUpsellDecision:p,checkExperiment:t,pinId:e.pinId}})}}},eB=function(e){return{type:$,payload:{isShown:e}}},eW=function(e){var n=e.pinId,t=e.attributionLabelSource,o=e.inImmediateUpsellGroup,i=e.inMwebDownloadCTAExp,a=e.showDownloadCloseupIcon,s=e.downloadAllowedCallback;return function(e){var c=e.checkExperiment;return e.sessionContext,function(e,d){var p=d(),_=(0,u.H)(c,{reduxUnauthDownloadCount:p.upsell.unauthDownloadCount,dispatch:e}),m=_.limitReached,f=_.oldCount,b=_.newCount;i?(0,r.My)("mweb.unauth.download_cta.download_image",{attributionLabelSource:t}):a?(0,r.My)("mweb.unauth.download_closeup_icon.download_image",{attributionLabelSource:t}):(0,r.My)("mweb.unauth.context_menu.download_image",{attributionLabelSource:t,limitReached:m,oldCount:f,newCount:b}),e({type:J,payload:{pinId:n,attributionLabelSource:t,limitReached:m,inImmediateUpsellGroup:o,inMwebDownloadCTAExp:i,showDownloadCloseupIcon:a,checkExperiment:c}}),l(d().upsell)||s()}}},eH=function(){return{type:z}},eq=function(e,n){return{type:ee,payload:{isIdeaPin:e,isContextualFollowEnabled:n}}},eV=function(){return{type:et}},eK=function(){return{type:eo}},eQ=function(e){return{type:er,payload:{count:e}}},eZ=function(e){return function(n){var t=n.checkExperiment;return n.sessionContext,function(n,o){var r,i=o().upsell;null!=(r=a.YM.mobile.shouldAllowUnauthSave)&&r.evaluate({checkExperiment:t,isPPMAndroidUnauthExperience:e.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:e.isFromUnauthContextMenu,currentUnauthSaves:e.currentUnauthSaves})&&!i.mWebSignupModal.modal.isShown?(e.unauthSavedPinsStore.save({id:e.pinId,nodeId:e.nodeId,imageUrl:e.getPinGifOrImageSrc({imagesUrls:e.imagesUrls,embedSrc:e.embedSrc,embedType:e.embedType,excludeOriginals:!e.isBot&&!e.isSocialBot})}),n({type:en}),e.setNumUnauthSavedPins(e.numUnauthSavedPins+1),e.handleShowNavFooter(n,e.forceShowNavFooter,e.isNavBarHidden,e.setForceShowNavFooter),e.successCallback&&e.successCallback()):n({type:ei,payload:{attributionLabel:e.isFromUnauthContextMenu?e.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:e.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:e.pinId,checkExperiment:t}})}}},eY=function(e){return{type:ea,payload:{isShown:e.isShown,appUpsellType:e.appUpsellType,isBlocking:e.isBlocking}}}},270922:function(e,n,t){t.d(n,{T9:function(){return a}});var o=t(95664),r=t(969809),i=t(238957),a=function(e,n,t){var a,l=(null==e?void 0:e.countryFromHostName)||(null==e?void 0:e.country)||"",u=(null==e||null==(a=e.userAgent)?void 0:a.raw)||("undefined"!=typeof navigator?navigator.userAgent:"");return{country:l,userAgent:u,referrer:(null==e?void 0:e.referrerFromHeader)||(null==e?void 0:e.referrerFromCookie)||"",unauthID:(null==e?void 0:e.unauthId)||"",region:l?(0,r.Z)(l.toUpperCase()):"OTHER",channel:n.isPaid?"paid":n.isInvite?"invite":n.isSocial?"social":n.isSEO?"seo":n.utmSource?"utm_".concat(n.utmSource):"direct",iab:u&&"string"==typeof u?(0,o.$K)(u)?"pinterest":(0,o.dh)(u)?"instagram":/wechat|micromessenger/i.test(u)?"wechat":(0,o.ry)(u)||/facebook|fbav|fban|tiktok|twitter|line/i.test(u)?"social":"none":"none",deviceType:t,revisitationState:(0,i.iU)()}}},932921:function(e,n,t){t.d(n,{H:function(){return c},Z:function(){return u}});var o=t(4533),r=t(34550),i=t(865043),a=t(671220);function l(e,n,t,o,r,i,a){try{var l=e[i](a),u=l.value}catch(e){return void t(e)}l.done?n(u):Promise.resolve(u).then(o,r)}function u(e,n){return s.apply(this,arguments)}function s(){var e;return e=regeneratorRuntime.mark(function e(n,t){var o,r,a,l,u,s,c,d,p,_,m,f,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.filename,r=n.imgSrc,a=n.imageDownloadSuccessCallback,l=n.category,u=n.pinId,s=n.viewParameter,c=n.viewType,p=void 0!==(d=n.isUnauth)&&d,m=void 0===(_=n.platform)?"web":_,f=n.expName,b=n.expGroup,"undefined"!=typeof window){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:if((0,i.My)("web.download.click",{category:l||"no_category",authType:p?"unauth":"auth",platform:m,viewType:c,expName:f,expGroup:b}),t({event_type:82,object_id_str:u,view_type:c||3,view_parameter:s||139}),!(r&&document)){e.next=9;break}return e.abrupt("return",fetch(r,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then(function(e){return e.blob()}).then(function(e){var n,t,r=document.createElement("a");r.href=window.URL.createObjectURL(e),r.setAttribute("download",o&&o.replace(".","_")),r.style.display="none",null==(n=document.body)||n.appendChild(r),r.click(),null==(t=document.body)||t.removeChild(r),(0,i.My)("web.download.success",{category:l||"no_category",authType:p?"unauth":"auth",platform:m,viewType:c,expName:f,expGroup:b}),null==a||a()}).catch(function(){throw(0,i.My)("web.download.failure",{category:l||"no_category",authType:p?"unauth":"auth",platform:m,viewType:c,expName:f,expGroup:b}),Error("Download image error")}));case 9:return e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}},e)}),(s=function(){var n=this,t=arguments;return new Promise(function(o,r){var i=e.apply(n,t);function a(e){l(i,o,r,a,u,"next",e)}function u(e){l(i,o,r,a,u,"throw",e)}a(void 0)})}).apply(this,arguments)}var c=function(e,n){var t=n||{},i=t.reduxUnauthDownloadCount,l=t.dispatch,u=(0,r.M0)();if(e("unuath_download_paywalled").anyEnabled||e("unauth_combined_download_exp").anyEnabled)return{limitReached:!0,oldCount:0,newCount:0};if(!u.accessAllowed){var s=void 0===i?0:i,c=s>=0,d=c?s:s+1;return s!==d&&l&&l((0,a.Dw)(d)),{limitReached:c,oldCount:s,newCount:d}}var p=u.getItem(o.rN)||0,_=p>=1,m=_?p:p+1;return p!==m&&(0,r.M0)().setItem(o.rN,m),{limitReached:_,oldCount:p,newCount:m}}},2061:function(e,n,t){t.d(n,{Yg:function(){return c},ib:function(){return p},nF:function(){return m},xX:function(){return _}});var o=t(501010),r=t(774838),i=t(739405),a=t(767415);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}var s=function(e){var n=(0,e.checkExperiment)("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0}).group;return{logStat:function(e,t){return(0,a.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach(function(n){var o,r;o=n,r=t[n],(o=function(e){var n=function(e,n){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!=l(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==l(n)?n:n+""}(o))in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({event:e,group:n},t)})}}},c=function(){var e=(0,r.B)().isAuthenticated,n=(0,i.HG)(),t=(0,o.Z)().checkExperiment;return e&&!n?s({checkExperiment:t}):{logStat:function(){}}},d=0,p=function(e){var n=e.checkExperiment;if(e.isAuthMweb){var t=s({checkExperiment:n}).logStat;(d+=1)<10&&t("repin_".concat(d))}};function _(e){var n=e.checkExperiment,t=e.isDesktop;if(!e.isAuthenticated)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1};if(t){var o=n("auth_dweb_graphql_pin_page").anyEnabled;return{isGraphQLEnabledForRelatedPins:o,isGraphQLEnabledInGeneral:o,shouldPrefetchCloseupPreviewFragment:!1}}var r=n("auth_mweb_graphql_pin_page"),i=r.anyEnabled;switch(r.group){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1};case"enabled_prefetch_closeup_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!0};case"only_closeup":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1};case"only_related_pins":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1};default:return{isGraphQLEnabledInGeneral:i,isGraphQLEnabledForRelatedPins:i,shouldPrefetchCloseupPreviewFragment:!1}}}function m(){return _({checkExperiment:(0,o.Z)().checkExperiment,isDesktop:(0,i.HG)(),isAuthenticated:(0,r.B)().isAuthenticated})}},163691:function(e,n){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach(function(n){var o,i;o=n,i=r[n],(o=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,n||"default");if("object"!=t(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(o))in e?Object.defineProperty(e,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}n.Z=function(e){return r(r({},e),{},{ts:Date.now()})}},238957:function(e,n,t){t.d(n,{K7:function(){return u},Vd:function(){return c},WT:function(){return l},iU:function(){return s}});var o=t(4533),r=t(994507),i=t(34550),a=t(163691),l=18e5,u=r.dm,s=function(){try{var e,n=null!=(e=(0,i.M0)().getItem(o.SI))?e:{},t=n.count,a=n.time,l=n.ts;if("number"==typeof t&&"number"==typeof a&&"number"==typeof l)return{count:t,time:a,ts:l};throw Error("Invalid revisitation data")}catch(e){return(0,r.dm)()}},c=function(e){(0,i.M0)().setItem(o.SI,(0,a.Z)(e))}},658375:function(e,n,t){t.d(n,{C:function(){return a},P:function(){return i}});var o=t(173874),r=t(767415),i=function(){return!1},a=function(e){(0,o.LM)(e)&&!i()&&(0,r.nP)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);